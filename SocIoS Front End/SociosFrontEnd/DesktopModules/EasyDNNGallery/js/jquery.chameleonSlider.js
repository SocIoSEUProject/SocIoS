(function(i){i.fn.chameleonSlider_1_4=function(w){var d=i.extend(!0,{},{content_source:"",container_dimensions:{width:750,height:400,w_as_ratio:!1,h_as_ratio:!1},autoplay:{enable:!0,interval:4E3,pause_on_hover:!0,indicator:{display:!0,position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1},dimensions:{height:2,width:750,h_as_ratio:!1,w_as_ratio:!1},orientation:"horizontal",flip_direction:!1}},arrows:{display:!0,auto_hide:!0,
hide_speed:250,prev:{position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:183,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},next:{position:{vertical:"top",horizontal:"right",h_offset:0,v_offset:183,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},autoplay_toggle:{display:!0,auto_hide:!0,hide_speed:250,position:{vertical:"top",horizontal:"left",h_offset:347,v_offset:130,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},scrollable_boxes:{item_info:{display:!0,
container:{dimensions:{height:100,width:750,h_as_ratio:!1,w_as_ratio:!1},resize_to_content:!0,position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:2,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},gallery_info:{display:!1,container:{dimensions:{height:100,width:750,h_as_ratio:!1,w_as_ratio:!1},resize_to_content:!0,position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:2,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}}},thumbs:{display:!0,auto_hide:!1,
hide_speed:250,width:100,height:46,captions:!0,display_item_types:!1,pagination:{direction:"horizontal",duration:250,easing:"swing"},tooltips:{enabled:!1,title:!0,description:!1,position:{my:"bottom center",at:"top center"},classes:""},container:{transparent:!0,dimensions:{height:20,width:679,h_as_ratio:!1,w_as_ratio:!1},position:{vertical:"bottom",horizontal:"left",h_offset:35,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},categories:{display:!1,auto_hide:!1,hide_speed:250,
width:100,height:46,pagination:{direction:"horizontal",duration:250,easing:"swing"},container:{dimensions:{height:20,width:679,h_as_ratio:!1,w_as_ratio:!1},position:{vertical:"bottom",horizontal:"left",h_offset:35,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},pagination:{display:!0,pages_at_once:7,direction:"horizontal",position:{vertical:"bottom",horizontal:"right",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},title_boxes:{current_item:{display:!1,
height:35,position:{vertical:"bottom",horizontal:"left",h_offset:0,v_offset:200,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},current_gallery:{display:!1,height:35,position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},buttons:{email:{display:!1,position:{vertical:"top",horizontal:"right",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1},email_subject:"Look at this link"},
download:{display:!1,position:{vertical:"top",horizontal:"left",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},fullscreen:{display:!1,position:{vertical:"top",horizontal:"left",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},exit_fullscreen:{display:!1,position:{vertical:"bottom",horizontal:"right",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},social_buttons:{display:!1,
direction:"horizontal",load_after_effect:!0,position:{vertical:"bottom",horizontal:"right",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1},buttons:{facebook:{display:!0,html:'<iframe src="//www.facebook.com/plugins/like.php?href={location_href_encoded}&amp;layout=button_count&amp;show_faces=true&amp;action=like&amp;font&amp;colorscheme=light&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:20px; width: 100px;" allowTransparency="true"></iframe>'},
google:{display:!0,html:'<g:plusone size="medium" href="{location_href}" annotation="bubble"></g:plusone><script type="text/javascript">gapi.plusone.go();<\/script>'},twitter:{display:!0,html:'<a href="http://twitter.com/share" class="twitter-share-button" data-url="{location_href}" data-count="horizontal">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"><\/script>'}},hideable:!1,container:{width:100,height:100}},main_panel:{display:!0,fill_panel:!1,stretch_small_image:!1,
top_left_align:!1,drag_navigation:!1,dimensions:{width:750,height:400,h_as_ratio:!1,w_as_ratio:!1},position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1},transition:{duration:800,effects:[]}},lightbox_title:!1,lightbox_description:!1,key_browse:!0,redirect_on_click:!1,redirect_on_click_target:"_self",lightbox_on_click:!1,module_id:0,portal_id:0,article_id:0,filter_values:"",filter_types:"",portal_path:"",locale:"",inhouse_player:"flowplayer",
flowplayer_src:"",pretty_photo_options:{},cycle_current_category:!0,open_at:null},w);return this.each(function(){var p,k,l=i(this),w,U,N=0,H=i('<div class="loading_slider_overlay" />'),O=i('<div class="indicator" />'),u=i("<p />"),v,g={},m,P=0,f={},s,n,B=i(),Q,t,x,L,q,E,r,y,z,F="",V=0,W=0,X=0,I=0,J=!1,G=!1,Y=!1,R=!1,M=!1,K=!1,C,D,c={container_dimensions:{},thumbs:{page:{vertical_space:0,horizontal_space:0,width:0,height:0,count:0},container:{},width:0,height:0,per_page:0,per_row:0,row_count:0,window_width:0,
window_height:0},categories:{page:{vertical_space:0,horizontal_space:0,width:0,height:0,count:0},container:{},width:0,height:0,per_page:0,per_row:0,row_count:0,window_width:0,window_height:0,render_categories:!0},autoplay:{indicator:{}},title_boxes:{current_item:{},current_gallery:{}},scrollable_boxes:{item_info:{},gallery_info:{}},pagination:{pages_at_once:0,page:{width:0,height:0}},main_panel:{dimensions:{},initialized:!1,disable_clicking:!1,disable_clicking_interval:""},preloaded_images:{},preloading_item:!1,
buttons:{email:{},download:{},fullscreen:{},exit_fullscreen:{}},html5:{video:!1},youtube_iframe_api:{called:!1,loaded:!1},ios:!1},e={init:function(){var a=document.createElement("video");d.container_dimensions.w_as_ratio||d.container_dimensions.h_as_ratio?(w=l.parent(),c.container_dimensions={width:d.container_dimensions.w_as_ratio?Math.round(w.width()*d.container_dimensions.width):d.container_dimensions.width,height:d.container_dimensions.h_as_ratio?Math.round(w.height()*d.container_dimensions.height):
d.container_dimensions.height},i(window).bind("resize.chameleonSlider",function(){clearTimeout(U);U=setTimeout(function(){var a={width:w.width(),height:d.container_dimensions.h_as_ratio?w.height():d.container_dimensions.height};l.trigger("resize_slider",[a])},200)})):c.container_dimensions={width:d.container_dimensions.width,height:d.container_dimensions.height};l.width(c.container_dimensions.width).height(c.container_dimensions.height).append(H).bind("destroy",function(){clearTimeout(F)});H.width(c.container_dimensions.width).height(c.container_dimensions.height).append(O).show(0);
try{c.html5.video=!!a.canPlayType}catch(b){}if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))c.ios=!0;e.get_content_source()},get_content_source:function(){3<N?u.is(":visible")?u.html("Unable to display the items (requesting the items failed)"):O.fadeOut(250,function(){u=i("<p>Unable to display the items (requesting the items failed)</p>");u.appendTo(H).css({display:"block",top:Math.floor((c.container_dimensions.height-u.outerHeight(!0))/
2)})}):(N+=1,i.ajax({dataType:"json",type:"get",url:d.content_source,timeout:15E3,data:"mid="+d.module_id+"&portal_path="+d.portal_path+"&portal_id="+d.portal_id+"&locale="+d.locale+"&article_id="+d.article_id+"&html5_player="+(c.html5.video&&c.ios?"1":"0")+(""===d.filter_values?"":"&filter_values="+d.filter_values+"&filter_types="+d.filter_types),success:e.load,complete:e.ajax_callback,cache:!1}))},ajax_callback:function(a,b){"success"!==b&&e.get_content_source()},load:function(a){var b=window.location.hash.substring(1),
j=b.indexOf("/"),h=void 0;0==a.content.length?O.fadeOut(250,function(){u=i("<p>"+(a.user_friendly_msg?a.user_friendly_msg:"There are no items to display.")+"</p>");u.appendTo(H).css({display:"block",top:Math.floor((c.container_dimensions.height-u.outerHeight(!0))/2)})}):(v=a.content,null!=d.open_at?(p=d.open_at.categories,k=[],k=e.category_indexes_from_ids(i.extend([],p),v),0==k.length&&(k=[0],p=[v[0].id]),g=e.get_category(k),g.item_count=g.items.length,m=e.item_index_from_id(d.open_at.item)):-1!=
j&&b.substring(0,j)=="slider_"+d.module_id?(b=b.substring(j+1),j=b.indexOf("/"),-1!==j&&(h=b.substring(j+1),j=h.indexOf("/"),-1!==j&&(h=h.substring(0,j)),h||(h=void 0),b=b.substring(0,b.indexOf("/"))),p=b.split("-"),k=[],k=e.category_indexes_from_ids(i.extend([],p),v),0==k.length&&(k=[0],p=[v[0].id]),g=e.get_category(k),g.item_count=g.items.length,m=e.item_index_from_id(h)):(p=[v[0].id],k=[0],g=v[0],g.item_count=g.items.length,m=e.item_index_from_id(void 0)),"YT"in window&&"Player"in window.YT&&(c.youtube_iframe_api.called=
!0,c.youtube_iframe_api.loaded=!0),d.buttons.exit_fullscreen.display&&e.exit_fullscreen.init(),d.autoplay.enable&&e.autoplay.init(),d.pagination.display&&e.pagination.init(),d.social_buttons.display&&e.social_buttons.init(),d.buttons.email.display&&e.email_button.init(),d.buttons.download.display&&e.download_button.init(),d.buttons.fullscreen.display&&e.fullscreen_button.init(),d.autoplay_toggle.display&&e.autoplay_toggle.init(),d.arrows.display&&e.arrows.init(),d.categories.display&&e.categories.init(),
d.thumbs.display&&e.thumbnails.init(),d.title_boxes.current_item.display&&e.item_title.init(),d.title_boxes.current_gallery.display&&e.gallery_title.init(),d.scrollable_boxes.item_info.display&&e.item_info.init(),d.scrollable_boxes.gallery_info.display&&e.gallery_info.init(),d.main_panel.display?e.main_panel.init():e.triggers())},show_item:function(a,b,d){a=parseInt(a,10);if(a!==m||"undefined"!=typeof b)K=!1,0>a?a=g.item_count-1:a>=g.item_count&&(a=0),e.autoplay.reset(),P=m,m=a,e.pagination.select(a),
e.social_buttons.display(a),e.thumbnails.select(a),e.item_title.select(a),e.item_info.display(a),e.download_button.display(a),e.email_button.display(a),c.preloading_item||("undefined"==typeof d?e.main_panel.display(a):e.main_panel.display(a,d))},next:function(){var a,b=v.length;!d.cycle_current_category&&m==g.item_count-1?(a=k.pop()+1,0!=k.length&&(b=e.get_category(k).children.length),a<b?k.push(a):k.push(0),p=e.category_ids_from_indexes(k),g=e.get_category(k),g.item_count=g.items.length,m=0,c.categories.render_categories=
!1,e.change_category()):e.show_item(m+1)},prev:function(){var a,b=v.length;!d.cycle_current_category&&0==m?(a=k.pop()-1,0!=k.length&&(b=e.get_category(k).children.length),0>a?k.push(b-1):k.push(a),p=e.category_ids_from_indexes(k),g=e.get_category(k),g.item_count=g.items.length,m=g.items.length-1,c.categories.render_categories=!1,e.change_category()):e.show_item(m-1)},pagination:{init:function(){var a;t=i('<div class="pagination" />');x=i('<ul class="pages_container" />');t.append(x);t.css("visibility",
"hidden");l.prepend(t);e.position_element(t,d.pagination.position);a=i("<li><span></span></li>");x.append(a);c.pagination.page.width=a.outerWidth(!0);c.pagination.page.height=a.outerHeight(!0);t.css("visibility","");e.pagination.display_category();e.pagination.select(m);x.delegate("li","click",function(){e.show_item(i(this).index());return!1})},display_category:function(){if(d.pagination.display){var a=0,b="";t.css("display","none");x.html("");c.pagination.pages_at_once=g.item_count<d.pagination.pages_at_once?
g.item_count:d.pagination.pages_at_once;"horizontal"===d.pagination.direction?(t.addClass("horizontal"),t.width(c.pagination.pages_at_once*c.pagination.page.width),t.height(c.pagination.page.height),x.width(g.item_count*c.pagination.page.width),x.height(c.pagination.page.height)):(t.addClass("vertical"),t.width(c.pagination.page.width),t.height(c.pagination.pages_at_once*c.pagination.page.height),x.width(c.pagination.page.width),x.height(g.item_count*c.pagination.page.height));for(;a<g.item_count;a++)b+=
"<li><span></span></li>";L=i(b);x.append(L);t.css("display","")}},select:function(a){if(d.pagination.display){var b=Math.floor(c.pagination.pages_at_once/2),e=a-b,h={};0>e?e=0:a>=g.item_count-b&&(e=g.item_count-c.pagination.pages_at_once);h="horizontal"==d.pagination.direction?{left:-(e*c.pagination.page.width)}:{top:-(e*c.pagination.page.height)};x.stop().animate(h,250);L.removeClass("current");L.eq(a).addClass("current")}}},social_buttons:{init:function(){q=i('<div class="social_buttons '+d.social_buttons.direction+
'" />');d.social_buttons.hideable?(E=i('<div class="social_buttons_toggle '+d.social_buttons.direction+'" />'),l.prepend(E),e.position_element(E,d.social_buttons.position),q.fadeTo(200,0,function(){q.hide()}).data("visible",!1),l.prepend(q),e.position_element(q,i.extend({},d.social_buttons.position,{h_offset:d.social_buttons.position.h_offset+E.outerWidth(!0)+5})),E.click(function(){q.data("visible")?(q.data("visible",!1).stop().fadeTo(200,0,function(){q.empty().hide()}),E.removeClass("active")):
(q.data("visible",!0).stop().fadeTo(200,1),e.social_buttons.display(m),E.addClass("active"))})):(l.prepend(q),e.position_element(q,d.social_buttons.position));e.social_buttons.display(m)},display:function(a){if(d.social_buttons.display&&(!d.social_buttons.hideable||q.data("visible"))){var b="",c="";q.html("");"string"==typeof g.items[a].social_button_url?c=g.items[a].social_button_url:(c=-1==location.href.indexOf("#")?location.href:location.href.substring(0,location.href.indexOf("#")),c=e.set_url_param(e.set_url_param(c,
"edgpid",g.items[a].id),"edgmid",d.module_id)+"#slider_"+d.module_id+"/"+p.join("-")+"/"+g.items[a].id+"/");for(button in d.social_buttons.buttons)d.social_buttons.buttons[button].display&&(b+='<div class="social_button">',b+=d.social_buttons.buttons[button].html.replace(/{location_href}/g,c).replace(/{location_href_encoded}/g,encodeURIComponent(c)),b+="</div>");M&&d.social_buttons.load_after_effect?(l.unbind("slider_transition_finnished.social_buttons"),l.bind("slider_transition_finnished.social_buttons",
function(){q.html("").append(b)})):q.append(b)}}},_button:{init:function(a){c.buttons[a.type]=i('<a class="standalone_button'+(a.custom_class?" "+a.custom_class:"")+'" href="#">'+a.text+"</a>");l.prepend(c.buttons[a.type]);e.position_element(c.buttons[a.type],d.buttons[a.type].position)},display:function(a){a.target="string"==typeof a.target?a.target:"_self";c.buttons[a.type].attr({href:a.href,target:a.target})}},email_button:{init:function(){e._button.init({type:"email",custom_class:"email",text:"Email this"});
e.email_button.display(m)},display:function(){var a=location.href.indexOf("#");d.buttons.email.display&&(a=-1==a?location.href:location.href.substring(0,a),a+="#slider_"+d.module_id+"/"+p.join("-")+"/"+g.items[m].id,e._button.display({type:"email",href:"mailto:?subject="+escape(d.buttons.email.email_subject)+"&body="+encodeURIComponent(a)}))}},download_button:{init:function(){e._button.init({type:"download",custom_class:"download",text:"Download"});e.download_button.display(m)},display:function(a){a=
g.items[a].download_url;d.buttons.download.display&&(a=!a?"#":a,e._button.display({type:"download",href:a,target:"_blank"}),"#"==a?c.buttons.download.stop().fadeTo(200,0):c.buttons.download.stop().fadeTo(200,1))}},fullscreen_button:{init:function(){e._button.init({type:"fullscreen",custom_class:"fullscreen",text:"Fullscreen"});c.buttons.fullscreen.click(function(){i(this).chameleonSliderFullscreen(d.fullscreen_options);return!1})}},exit_fullscreen:{init:function(){e._button.init({type:"exit_fullscreen",
custom_class:"exit_fullscreen",text:"Exit fullscreen"})}},main_panel:{init:function(){var a,b="mousedown",j="mousemove";mouseup="mouseup";s=i('<div class="main_panel" />');e.main_panel.size();n=i('<div class="items_wrapper" />');s.append(n);l.prepend(s);if(d.redirect_on_click||d.lightbox_on_click)B=i('<a href="#" class="media_link" />'),d.redirect_on_click&&B.attr("target",d.redirect_on_click_target),s.append(B);!d.redirect_on_click&&d.lightbox_on_click&&n.append('<div class="lightbox_links_container" style="display: none;"></div>');
l.bind("slider_transition_finnished.main_panel",function(){M=!1});e.main_panel.display_category(!0);c.preloading_item||(e.main_panel.display(m,""),e.triggers());if(d.main_panel.drag_navigation){if(a="ontouchstart"in window)b="touchstart",j="touchmove",mouseup="touchend";s.delegate("a","click",function(a){c.main_panel.disable_clicking&&a.preventDefault()}).bind(b+".chameleon_"+d.module_id,function(b){a&&(b.originalEvent.touches&&b.originalEvent.touches.length?b=b.originalEvent.touches[0]:b.originalEvent.changedTouches&&
b.originalEvent.changedTouches.length&&(b=b.originalEvent.changedTouches[0]));s.data("dragging",{start_position:{left:b.pageX,top:b.pageY}});b.preventDefault()});i(document).bind(j+".chameleon_"+d.module_id,function(b){if("object"==typeof s.data("dragging")){c.main_panel.disable_clicking=!0;a&&(b.originalEvent.touches&&b.originalEvent.touches.length?b=b.originalEvent.touches[0]:b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length&&(b=b.originalEvent.changedTouches[0]));b=s.data("dragging").start_position.left-
b.pageX;if(50>Math.abs(b))return!1;s.data("dragging",!1);0>b?e.prev():e.next()}}).bind(mouseup+".chameleon_"+d.module_id,function(){s.data("dragging",!1);c.main_panel.disable_clicking_interval=setTimeout(function(){c.main_panel.disable_clicking=!1},10)})}c.main_panel.initialized=!0},size:function(){c.main_panel.dimensions=e.get_dimensions(d.main_panel.dimensions);e.position_element(s,d.main_panel.position);s.width(c.main_panel.dimensions.width).height(c.main_panel.dimensions.height)},display_category:function(a){var b,
j="";b=0;var h,f,k;current_item=g.items[m];if("image"==current_item.type||("video"==current_item.type||"audio"==current_item.type)&&d.lightbox_on_click)c.preloading_item=!0,a?i("<img />").load(function(){c.preloading_item=!1;e.main_panel.display(m,"");e.triggers()}).error(function(){c.preloading_item=!1;e.triggers()}).attr("src",current_item.src):(s.append('<div class="preloading_item" />'),i("<img />").load(function(){c.preloading_item=!1;e.main_panel.display(m,"");s.find(".preloading_item").fadeOut(1E3,
function(){i(this).remove()})}).error(function(){c.preloading_item=!1;e.main_panel.display(m,"");s.find(".preloading_item").fadeOut(1E3,function(){i(this).remove()})}).attr("src",current_item.src));for(;b<g.item_count;b++){a=g.items[b];if(("image"==a.type||("video"==a.type||"audio"==a.type)&&d.lightbox_on_click)&&!c.preloaded_images[a.src])c.preloaded_images[a.src]={loading:!0,loaded:!1},i("<img />").load({src:a.src},function(a){c.preloaded_images[a.data.src]={loading:!1,loaded:!0,width:this.width,
height:this.height}}).attr("src",a.src);!d.redirect_on_click&&d.lightbox_on_click&&("image"==a.type||"video"==a.type||"audio"==a.type?(h=a.lightbox_url,f=a.download_url?a.download_url:"",k=a.src):k=f=h="",h&&(j+='<a href="'+h+'" rel="prettyPhoto_M'+d.module_id+'" edgmid="'+d.module_id+'" edgpid="'+a.id+'" downhref="'+f+(d.lightbox_description&&a.info?'" pptitle="'+a.info.replace('"',"&quot;"):"")+'"><img src="'+k+'" alt="'+(d.lightbox_title&&a.title?a.title:"")+'" /></a>'))}!d.redirect_on_click&&
d.lightbox_on_click&&(b=n.find("> .lightbox_links_container"),b.html(j),Q=b.find("> a"),Q.prettyPhoto(d.pretty_photo_options))},display:function(a){var b="",j="",h=g.items[a];M=!0;B.unbind("click");if("image"==h.type)2==arguments.length?j=b=arguments[1]:1==d.main_panel.transition.effects.length?j=b=d.main_panel.transition.effects[0]:1<d.main_panel.transition.effects.length&&(b=Math.floor(Math.random()*d.main_panel.transition.effects.length),j=b=d.main_panel.transition.effects[b]),B.css("display",
"block"),d.redirect_on_click&&B.attr("href","string"==typeof h.on_click_url&&h.on_click_url?h.on_click_url:"#");else if("video"==h.type||"audio"==h.type)b="",d.redirect_on_click||"undefined"!=typeof h.html&&""!=h.html?B.css("display","none"):B.css("display","block");!d.redirect_on_click&&d.lightbox_on_click&&B.attr("href","#").click(function(){if(c.main_panel.disable_clicking)return!1;Q.filter('a[edgpid="'+h.id+'"]').trigger("click");return!1});"object"==typeof j?b=j.type:""==b&&(b="show");e.main_panel._transitions[b](a,
j);d.main_panel.fill_panel&&("image"==h.type||("video"==h.type||"audio"==h.type)&&d.lightbox_on_click)&&e.main_panel._fit_image(n.find("> .item_container").filter(":last").find("> img"))},_fit_image:function(a){var b=a.attr("src"),e=c.preloaded_images[b],h=function(a,b){var e=c.main_panel.dimensions.width,j=c.main_panel.dimensions.height,h;b.width==e&&b.height==j||(a.css({position:"relative"}),b.width>e||b.height>j||d.main_panel.stretch_small_image?(a.css({width:"100%",height:"auto"}),h=e/b.width,
h=Math.floor(b.height*h),h<j?(h=j/b.height,j=Math.floor(b.width*h),a.css({height:"100%",width:"auto"}),d.main_panel.top_left_align||a.css({left:-Math.floor((j-e)/2)})):h>j&&!d.main_panel.top_left_align&&a.css({top:-Math.floor((h-j)/2)})):d.main_panel.top_left_align||(b.width<e&&a.css({left:Math.floor((e-b.width)/2)}),b.height<j&&a.css({top:Math.floor((j-b.height)/2)})))};e&&e.loaded?h(a,e):i("<img />").load({src:b,$img:a},function(a){c.preloaded_images[a.data.src]={loading:!1,loaded:!0,width:this.width,
height:this.height};h(a.data.$img,c.preloaded_images[a.data.src])}).attr("src",b)},_transitions:{show:function(a){var b='<div class="item_container new_item">',j=g.items[a],a=n.find("> .item_container").eq(0),h="undefined"==typeof j.html||""==j.html?"":j.html,f="",S,T,p=!1;("video"==j.type||"audio"==j.type)&&h?(j="undefined"==typeof j.video_src||""==j.video_src?"":j.video_src,""==j?d.autoplay.enable&&(f=e._video.get_provider(h),S=e._video.get_video_id(f,h)):(f=d.inhouse_player,S=j),c.html5.video&&
c.ios||""===f?b+=h:(p=!0,T="chameleon_video_container_"+d.module_id+"_"+k.join("-")+"_"+m+"_"+Math.round(1E5*Math.random()),b+='<div id="'+T+'"></div>')):b+='<img alt="" src="'+j.src+'" />';b=i(b+"</div>");n.find("> .item_container.new_item").removeClass("new_item");b.css({width:c.main_panel.dimensions.width,height:c.main_panel.dimensions.height}).appendTo(n);p&&e._video.player_setup({container:T,provider:f,id:S,dimensions:c.main_panel.dimensions});a.hasClass("new_item")||a.remove();p||l.trigger("slider_transition_finnished")},
fade:function(a){a=i('<div class="item_container"><img alt="" src="'+g.items[a].src+'" /></div>');n.find("> .item_container.new_item").removeClass("new_item");a.css({width:c.main_panel.dimensions.width,height:c.main_panel.dimensions.height,display:"none"}).appendTo(n).fadeIn(d.main_panel.transition.duration,function(){var a=n.find("> .item_container").eq(0);a.hasClass("new_item")||a.remove();l.trigger("slider_transition_finnished")})},slide:function(a,b){var e=i('<div class="item_container new_item"><img alt="" src="'+
g.items[a].src+'" /></div>'),h=n.find("> .item_container").filter(":last"),f="left",k=function(){var a=n.find("> .item_container").eq(0);a.hasClass("new_item")||a.remove();l.trigger("slider_transition_finnished")};b.force_horizontal?f=P<a?"left":"right":b.force_vertical?f=P<a?"up":"down":1==b.directions.length?f=b.directions[0]:1<b.directions.length&&(f=b.directions[Math.floor(Math.random()*b.directions.length)]);n.find("> .item_container.new_item").removeClass("new_item");e.css({width:c.main_panel.dimensions.width,
height:c.main_panel.dimensions.height});switch(f){case "down":e.css("top",-c.main_panel.dimensions.height).appendTo(n).animate({top:0},d.main_panel.transition.duration,"swing",k);h.animate({top:c.main_panel.dimensions.height},d.main_panel.transition.duration,"swing");break;case "up":e.css("top",c.main_panel.dimensions.height).appendTo(n).animate({top:0},d.main_panel.transition.duration,"swing",k);h.animate({top:-c.main_panel.dimensions.height},d.main_panel.transition.duration,"swing");break;case "right":e.css("left",
-c.main_panel.dimensions.width).appendTo(n).animate({left:0},d.main_panel.transition.duration,"swing",k);h.animate({left:c.main_panel.dimensions.width},d.main_panel.transition.duration,"swing");break;default:e.css("left",c.main_panel.dimensions.width).appendTo(n).animate({left:0},d.main_panel.transition.duration,"swing",k),h.animate({left:-c.main_panel.dimensions.width},d.main_panel.transition.duration,"swing")}},stripes:function(a,b){var e=0,h=0,f=0,k=0,m=0,p=0,s=0,t=0,q=0,r=0,v=g.items[a].src,w=
Math.floor(d.main_panel.transition.duration/b.num_of_stripes),x=i('<div class="item_container new_item"></div>'),z=function(){var a=n.find("> .item_container").eq(0);a.hasClass("new_item")||a.remove();l.trigger("slider_transition_finnished")},B=function(a,c){var g=e,n=h,u=function(){a.animate("horizontal"==b.orientation?{left:0,opacity:1}:{top:0,opacity:1},{duration:d.main_panel.transition.duration,easing:"swing",complete:function(){0==b.start_at||2==b.start_at?c+1==b.num_of_stripes&&z():1==b.start_at?
0==c&&z():c==Math.floor(b.num_of_stripes/2)&&z()}})};"horizontal"==b.orientation?(m=c*h,p=0===b.direction?-e:1===b.direction?e:0==c%2?-e:e,s=q-m,t=r):(p=c*e,m=0===b.direction?-h:1===b.direction?h:0==c%2?-h:h,s=q,t=r-p);c+1==b.num_of_stripes&&(g=f,n=k);a=i('<div class="fancy_effect_element" />');a.css({width:g,height:n,top:m,left:p,opacity:0,background:"url('"+v+"') no-repeat "+t+"px "+s+"px "+l.css("background-color")}).appendTo(x);if(0===b.start_at)setTimeout(u,c*w+1);else if(1==b.start_at)setTimeout(u,
(b.num_of_stripes-1-c)*w+1);else if(2==b.start_at||3==b.start_at)g=0,0==b.num_of_stripes%2?(n=b.num_of_stripes/2,c<n?g=3==b.start_at?c:Math.abs(c-n+1):(g=c-n,3==b.start_at&&(g=n-1-g))):(n=Math.floor(b.num_of_stripes/2),g=c<n?n-c:c-n,3==b.start_at&&(g=n-g)),setTimeout(u,g*w+1)},b=i.extend(!0,{orientation:"vertical",num_of_stripes:12,direction:0,start_at:0,randomize:{orientation:!1,direction:!1,start_at:!1}},b);b.randomize.orientation&&(b.orientation=0==Math.floor(2*Math.random())?"horizontal":"vertical");
b.randomize.direction&&(b.direction=Math.floor(3*Math.random()));b.randomize.start_at&&(b.start_at=Math.floor(4*Math.random()));n.find("> .item_container.new_item").removeClass("new_item");x.css({width:c.main_panel.dimensions.width,height:c.main_panel.dimensions.height}).appendTo(n);"horizontal"==b.orientation?(f=e=c.main_panel.dimensions.width,h=Math.ceil(c.main_panel.dimensions.height/b.num_of_stripes),k=h*b.num_of_stripes-c.main_panel.dimensions.height,k=0==k?h:h-k):(k=h=c.main_panel.dimensions.height,
e=Math.ceil(c.main_panel.dimensions.width/b.num_of_stripes),f=e*b.num_of_stripes-c.main_panel.dimensions.width,f=0==f?e:e-f);var A=c.preloaded_images[v],u=c.main_panel.dimensions.width,y=c.main_panel.dimensions.height;A.width==u&&A.height==y||(A.width<u?r=Math.floor((u-A.width)/2):A.width>u&&(r=-Math.floor((A.width-u)/2)),A.height<y?q=Math.floor((y-A.height)/2):A.height>y&&(q=-Math.floor((A.height-y)/2)));for(A=0;A<b.num_of_stripes;A++)B(void 0,A)}}},_video:{get_provider:function(a){if("<iframe"==
a.substring(0,7)){if(-1!==a.indexOf("youtube.com/embed/",7))return"youtube";if(-1!==a.indexOf("player.vimeo.com/video/",7))return"vimeo"}return""},get_video_id:function(a,b){var c,d;switch(a){case "youtube":case "vimeo":return c=i("<div>"+b+"</div>").find("iframe:first").attr("src"),d=c.indexOf("?"),-1!==d&&(c=c.substring(0,d)),"/"==c[c.length-1]&&(c=c.substring(0,c.length-1)),c.substring(c.lastIndexOf("/")+1);default:return""}},player_setup:function(a){var b=i("#"+a.container);b.css(a.dimensions);
a.container=b;switch(a.provider){case "youtube":e._video._youtube_player(a);break;case "vimeo":e._video._vimeo_player(a);break;case "flowplayer":e._video._flow_player(a)}},_youtube_player:function(a){var b=a.container.attr("id")+"_object",d,h=function(){new YT.Player(b,{events:{onStateChange:function(a){switch(a.data){case -1:l.trigger("slider_transition_finnished");break;case YT.PlayerState.PLAYING:K=!0;e.autoplay.reset();break;case YT.PlayerState.ENDED:setTimeout(e.next,1E3)}}}})};a.container.append('<iframe id="'+
b+'" type="text/html" width="'+a.dimensions.width+'" height="'+a.dimensions.height+'" src="http://www.youtube.com/embed/'+a.id+"?enablejsapi=1&amp;wmode=transparent&amp;origin="+location.protocol+"//"+location.host+'" frameborder="0"></iframe>');c.youtube_iframe_api.called||(c.youtube_iframe_api.called=!0,a=document.createElement("script"),a.src="//www.youtube.com/iframe_api",d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(a,d));c.youtube_iframe_api.loaded?h():window.onYouTubeIframeAPIReady=
function(){c.youtube_iframe_api.loaded=!0;h()}},_vimeo_player:function(a){var b=a.container.attr("id")+"_object",c="http://vimeo.com/moogaloop.swf?clip_id="+a.id+"&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=1&amp;fullscreen=1&amp;autoplay=0&amp;loop=0&amp;api=1&amp;player_id="+b,b='<object width="'+a.dimensions.width+'" height="'+a.dimensions.height+'"><param name="movie" value="'+c+'" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="flashvars" value="api=1" /><embed id="'+
b+'" src="'+c+'" type="application/x-shockwave-flash" wmode="transparent" width="'+a.dimensions.width+'" height="'+a.dimensions.height+'" allowscriptaccess="always" allowfullscreen="true"></embed></object>';window.chameleon_video_vimeo_play=function(){K=!0;e.autoplay.reset()};window.chameleon_video_vimeo_end=function(){setTimeout(e.next,1E3)};window.vimeo_player_loaded=function(a){a=document.getElementById(a);l.trigger("slider_transition_finnished");a.api_addEventListener("play","chameleon_video_vimeo_play");
a.api_addEventListener("finish","chameleon_video_vimeo_end")};a.container.append(b)},_flow_player:function(a){var b=!1;a.container.html('<video src="'+a.id+'" />').flowplayer({swf:d.flowplayer_src}).bind("ready",function(){l.trigger("slider_transition_finnished")}).bind("resume",function(){d.autoplay.enable&&!b&&(K=b=!0,e.autoplay.reset())}).bind("finish",function(){d.autoplay.enable&&setTimeout(e.next,1E3)})}},key_browse:function(){i(document).keyup(function(a){37===a.keyCode&&e.prev();39===a.keyCode&&
e.next();return!1})},_scrollable_boxes:{init:function(a){var b,j=d.scrollable_boxes[a.box];b=c.scrollable_boxes[a.box]={jq:{container:i('<div class="scrollable_box'+(a.custom_class?" "+a.custom_class:"")+'" />'),viewport:i('<div class="viewport" />'),content:i('<div class="content" />'),scrollbar:i()}};b.jq.container.append(b.jq.viewport);b.jq.viewport.append(b.jq.content);l.prepend(b.jq.container);e._scrollable_boxes.size(a.box);j.container.resize_to_content||b.jq.container.height(b.dimensions.height);
e._scrollable_boxes.display(a)},size:function(a){var b=c.scrollable_boxes[a],a=d.scrollable_boxes[a];a.display&&(b.jq.scrollbar.remove(),b.jq.scrollbar=i('<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>'),b.dimensions=e.get_dimensions(a.container.dimensions),e.position_element(b.jq.container,a.container.position),b.dimensions.height>c.container_dimensions.height&&(b.dimensions.height=c.container_dimensions.height),b.dimensions.width>c.container_dimensions.width&&
(b.dimensions.width=c.container_dimensions.width),b.jq.container.width(b.dimensions.width).css({maxHeight:b.dimensions.height}).append(b.jq.scrollbar).tinyscrollbar({size:b.dimensions.height-(b.jq.scrollbar.outerHeight(!0)-b.jq.scrollbar.height())}).hide(0),b.jq.viewport.css({maxHeight:b.dimensions.height-b.jq.viewport.outerHeight(!0)}),a.container.resize_to_content||b.jq.container.height(b.dimensions.height))},display:function(a){var b=c.scrollable_boxes[a.box],e=d.scrollable_boxes[a.box],h=function(){b.jq.viewport.css({visibility:"",
display:"none"}).fadeIn(200);b.jq.scrollbar.hasClass("disable")||b.jq.scrollbar.fadeIn(200)};e.display&&("string"==typeof a.content&&a.content?b.jq.container.is(":visible")?(b.jq.container.css({height:b.jq.container.height()}),b.jq.scrollbar.fadeOut(200),b.jq.viewport.fadeOut(200,function(){b.jq.content.html(a.content);b.jq.viewport.css({visibility:"hidden",display:"block"}).removeClass("scrollable");b.jq.container.tinyscrollbar_update();b.jq.scrollbar.hasClass("disable")||(b.jq.viewport.addClass("scrollable"),
b.jq.container.tinyscrollbar_update());e.container.resize_to_content?b.jq.container.animate({height:b.jq.viewport.outerHeight(!0)},200,h):h()})):(b.jq.container.css({visibility:"hidden",display:"block"}),b.jq.viewport.removeClass("scrollable"),b.jq.content.html(a.content),b.jq.container.tinyscrollbar_update(),b.jq.scrollbar.hasClass("disable")?b.jq.scrollbar.css({display:"none"}):(b.jq.viewport.addClass("scrollable"),b.jq.scrollbar.css({display:"block"}),b.jq.container.tinyscrollbar_update()),b.jq.container.css({visibility:"",
display:"none",height:e.container.resize_to_content?b.jq.viewport.outerHeight(!0):b.dimensions.height}).fadeIn(200)):b.jq.container.fadeOut(200))}},item_info:{init:function(){e._scrollable_boxes.init({box:"item_info",custom_class:"item_info",content:g.items[m].info})},display:function(a){e._scrollable_boxes.display({box:"item_info",content:g.items[a].info})}},gallery_info:{init:function(){e._scrollable_boxes.init({box:"gallery_info",custom_class:"gallery_info",content:g.info})},display:function(){e._scrollable_boxes.display({box:"gallery_info",
content:g.info})}},autoplay_toggle:{init:function(){z=i('<a href="#" class="autoplay_toggle">Play/Pause</a>');d.autoplay.enable?z.addClass("pause"):G=!0;z.prependTo(l).click(function(){G?(G=!1,z.addClass("pause"),d.autoplay.enable||(Y=!0,d.autoplay.enable=!0,e.autoplay.init()),d.autoplay.pause_on_hover||e.autoplay.start()):(z.removeClass("pause"),G=!0,J||e.autoplay.pause());return!1});e.position_element(z,d.autoplay_toggle.position);d.autoplay_toggle.auto_hide&&(z.css("display","none"),l.hover(function(){z.stop().fadeTo(d.autoplay_toggle.hide_speed,
1)},function(){z.stop().fadeTo(d.autoplay_toggle.hide_speed,0)}))}},autoplay:{init:function(){d.autoplay.indicator.display&&(r=i('<div class="indicator" />'),y=i('<div class="autoplay_container" />'),e.autoplay.size(),"vertical"==d.autoplay.indicator.orientation&&!d.autoplay.indicator.flip_direction?r.css({top:"auto",bottom:0}):d.autoplay.indicator.flip_direction&&r.css({left:"auto",right:0}),y.append(r).css("display","none"),Y?(l.append(y),y.fadeIn(300)):(l.prepend(y),y.css("display","")));l.bind("slider_transition_finnished",
function(){!G&&!J&&e.autoplay.start()})},size:function(){d.autoplay.enable&&d.autoplay.indicator.display&&(c.autoplay.indicator=e.get_dimensions(d.autoplay.indicator.dimensions),e.position_element(y,d.autoplay.indicator.position),"vertical"==d.autoplay.indicator.orientation?r.width(c.autoplay.indicator.width):r.height(c.autoplay.indicator.height),y.css(c.autoplay.indicator))},start:function(){var a=d.autoplay.interval,b=!0;d.autoplay.enable&&""==F&&(V=(new Date).getTime(),R=!1,0!=I&&(b=!1,a=I),d.autoplay.indicator.display&&
(r.stop(),"vertical"==d.autoplay.indicator.orientation?(b&&r.height(0),r.animate({height:c.autoplay.indicator.height},a,"linear")):(b&&r.width(0),r.animate({width:c.autoplay.indicator.width},a,"linear"))),F=setTimeout(e.next,a))},pause:function(){d.autoplay.enable&&!R&&(W=(new Date).getTime(),X=W-V,d.autoplay.indicator.display&&r.stop(),I=(0==I?d.autoplay.interval:I)-X,clearTimeout(F),F="")},reset:function(){d.autoplay.enable&&(clearTimeout(F),F="",I=0,R=!0,d.autoplay.indicator.display&&(r.stop(),
"vertical"==d.autoplay.indicator.orientation?r.height(0):r.width(0)))}},_items_panel:{init:function(a){a.page.append(a.item).appendTo(f[a.panel].container);c[a.panel].width=a.item.outerWidth(!0);c[a.panel].height=a.item.outerHeight(!0);c[a.panel].page.horizontal_space=a.page.outerWidth(!0)-a.page.width();c[a.panel].page.vertical_space=a.page.outerHeight(!0)-a.page.height();a.page.remove();d[a.panel].container.transparent||f[a.panel].wrapper.addClass("not_transparent")},calculate_pages:function(a){var b;
c[a.panel].container=e.get_dimensions(d[a.panel].container.dimensions);e.position_element(f[a.panel].wrapper,d[a.panel].container.position);c[a.panel].page.width=c[a.panel].width+c[a.panel].page.horizontal_space;c[a.panel].page.width>c[a.panel].container.width?c[a.panel].container.width=c[a.panel].page.width:c[a.panel].page.width=c[a.panel].container.width-c[a.panel].page.horizontal_space;c[a.panel].page.height=c[a.panel].height+c[a.panel].page.vertical_space;c[a.panel].page.height>c[a.panel].container.height?
c[a.panel].container.height=c[a.panel].page.height:c[a.panel].page.height=c[a.panel].container.height-c[a.panel].page.vertical_space;c[a.panel].per_row=Math.floor(c[a.panel].page.width/c[a.panel].width);c[a.panel].page.width=c[a.panel].per_row*c[a.panel].width;c[a.panel].row_count=Math.floor(c[a.panel].page.height/c[a.panel].height);c[a.panel].page.height=c[a.panel].row_count*c[a.panel].height;c[a.panel].per_page=c[a.panel].per_row*c[a.panel].row_count;c[a.panel].page.count=Math.ceil(a.item_count/
c[a.panel].per_page);1<c[a.panel].page.count?(f[a.panel].pagination?(f[a.panel].pagination.next.css("display","block"),f[a.panel].pagination.prev.css("display","block")):(f[a.panel].wrapper.append('<a href="#" class="navigation '+d[a.panel].pagination.direction+' prev">Previous</a><a href="#" class="navigation '+d[a.panel].pagination.direction+' next">Next</a>'),f[a.panel].pagination={prev:f[a.panel].wrapper.find("> a.navigation.prev"),next:f[a.panel].wrapper.find("> a.navigation.next")},f[a.panel].pagination.next.click(function(){var b=
f[a.panel].pages.filter(".current").index();e._items_panel.move_to_page(a.panel,b+1);return!1}),f[a.panel].pagination.prev.click(function(){var b=f[a.panel].pages.filter(".current").index();e._items_panel.move_to_page(a.panel,b-1);return!1})),"vertical"==d[a.panel].pagination.direction?(b=c[a.panel].height+c[a.panel].page.vertical_space+2*f[a.panel].pagination.prev.outerHeight(!0),b>c[a.panel].container.height&&(c[a.panel].container.height=b),f[a.panel].pagination.next.css({top:c[a.panel].container.height-
f[a.panel].pagination.next.height()}),c[a.panel].row_count=Math.floor((c[a.panel].container.height-2*f[a.panel].pagination.prev.outerHeight(!0)-c[a.panel].page.vertical_space)/c[a.panel].height),c[a.panel].page.height=c[a.panel].row_count*c[a.panel].height):(b=c[a.panel].width+c[a.panel].page.horizontal_space+2*f[a.panel].pagination.prev.outerWidth(!0),b>c[a.panel].container.width&&(c[a.panel].container.width=b),c[a.panel].per_row=Math.floor((c[a.panel].container.width-2*f[a.panel].pagination.prev.outerWidth(!0)-
c[a.panel].page.horizontal_space)/c[a.panel].width),c[a.panel].page.width=c[a.panel].per_row*c[a.panel].width),c[a.panel].per_page=c[a.panel].per_row*c[a.panel].row_count,c[a.panel].page.count=Math.ceil(a.item_count/c[a.panel].per_page)):f[a.panel].pagination&&(f[a.panel].pagination.next.css("display","none"),f[a.panel].pagination.prev.css("display","none"));f[a.panel].wrapper.css(c[a.panel].container);c[a.panel].window_width=c[a.panel].page.width+c[a.panel].page.horizontal_space;c[a.panel].window_height=
c[a.panel].page.height+c[a.panel].page.vertical_space;f[a.panel].window.width(c[a.panel].window_width).height(c[a.panel].window_height).css({top:Math.floor((c[a.panel].container.height-c[a.panel].window_height)/2)});"vertical"==d[a.panel].pagination.direction?f[a.panel].container.width(c[a.panel].window_width).height(0):f[a.panel].container.width(0).height(c[a.panel].window_height)},move_to_page:function(a,b){var e,h=f[a].pages.length-1;!(0>h)&&!f[a].pages.eq(b).hasClass("current")&&(b>h?(e="vertical"==
d[a].pagination.direction?{top:h*-(c[a].page.height+c[a].page.vertical_space)-10}:{left:h*-(c[a].page.width+c[a].page.horizontal_space)-10},f[a].container.animate(e,40,"swing",function(){e="vertical"==d[a].pagination.direction?{top:h*-(c[a].page.height+c[a].page.vertical_space)}:{left:h*-(c[a].page.width+c[a].page.horizontal_space)};f[a].container.animate(e,50,"swing")})):0>b?(e="vertical"==d[a].pagination.direction?{top:10}:{left:10},f[a].container.animate(e,40,"swing",function(){e="vertical"==d[a].pagination.direction?
{top:0}:{left:0};f[a].container.animate(e,50,"swing")})):(f[a].pages.removeClass("current").eq(b).addClass("current"),e="vertical"==d[a].pagination.direction?{top:b*-(c[a].page.height+c[a].page.vertical_space)}:{left:b*-(c[a].page.width+c[a].page.horizontal_space)},f[a].container.stop(!0,!1).animate(e,d[a].pagination.duration,d[a].pagination.easing)))}},thumbnails:{init:function(){f.thumbs={container:i('<div class="thumb_container" />'),window:i('<div class="thumb_window" />'),wrapper:i('<div class="thumb_wrapper" />')};
f.thumbs.window.append(f.thumbs.container);f.thumbs.wrapper.append(f.thumbs.window);l.prepend(f.thumbs.wrapper);e._items_panel.init({panel:"thumbs",page:i("<ul />"),item:i('<li><img src="'+v[0].items[0].thumb.src+'" alt="" style="width: '+d.thumbs.width+"px; height: "+d.thumbs.height+'px;" /></li>')});d.thumbs.auto_hide&&(f.thumbs.wrapper.css({display:"none"}),l.hover(function(){f.thumbs.wrapper.stop().fadeTo(d.thumbs.hide_speed,1)},function(){f.thumbs.wrapper.stop().fadeTo(d.thumbs.hide_speed,0)}));
e.thumbnails.display_category(!1);e.thumbnails.select(m)},display_category:function(){var a,b,j,h=0,k=0<arguments.length&&!1===arguments[0]?!1:!0;if(d.thumbs.display){e._items_panel.calculate_pages({panel:"thumbs",item_count:g.item_count});for(f.thumbs.container.html("");h<g.item_count;h++)0===h%c.thumbs.per_page&&("vertical"==d.thumbs.pagination.direction?f.thumbs.container.height(f.thumbs.container.height()+c.thumbs.window_height):f.thumbs.container.width(f.thumbs.container.width()+c.thumbs.window_width),
a=i("<ul />"),a.width(c.thumbs.page.width).height(c.thumbs.page.height).appendTo(f.thumbs.container)),b=d.thumbs.captions&&"string"==typeof g.items[h].thumb.caption&&g.items[h].thumb.caption?'<div class="caption_wrapper"><div class="caption">'+g.items[h].thumb.caption+"</div></div>":"",j=d.thumbs.display_item_types?'<span class="item_type_icon '+g.items[h].type+'"></span>':"",b='<li><img style="width: '+d.thumbs.width+"px; height: "+d.thumbs.height+'px;" src="'+g.items[h].thumb.src+'" alt="" />'+
j+b,k&&(i("<img />").load({index:h},function(a){f.thumbs.pages.find(".thumb_preloading").eq(a.data.index).fadeTo(500,0,function(){i(this).remove()})}).attr("src",g.items[h].thumb.src),b+='<div class="thumb_preloading"></div>'),a.append(b+"</li>"),d.thumbs.tooltips.enabled&&i.fn.qtip&&(j=!0,b="",g.items[h].thumb.tooltip&&(d.thumbs.tooltips.title&&g.items[h].thumb.tooltip.title&&(b='<p class="title">'+g.items[h].thumb.tooltip.title+"</p>",j=!1),d.thumbs.tooltips.description&&g.items[h].thumb.tooltip.description&&
(b+='<div class="description">'+g.items[h].thumb.tooltip.description+"</div>",j=!1),j||a.find("> li").filter(":last").qtip({content:{text:b},position:d.thumbs.tooltips.position,style:{classes:"chameleon_slider_tooltip "+d.thumbs.tooltips.classes,tip:{corner:!0}}})));f.thumbs.pages=f.thumbs.container.find("> ul")}},trigger:function(){f.thumbs.container.delegate("ul > li","click",function(){var a=i(this);e.show_item(a.parent().index()*c.thumbs.per_page+a.index());return!1})},select:function(a){d.thumbs.display&&
(a=f.thumbs.pages.find("> li").eq(a),e._items_panel.move_to_page("thumbs",a.parent().index()),f.thumbs.pages.find("> li.on").removeClass("on"),a.addClass("on"))}},categories:{init:function(){f.categories={container:i('<div class="categories_container" />'),window:i('<div class="categories_window" />'),wrapper:i('<div class="categories_wrapper '+d.categories.pagination.direction+'" />')};f.categories.window.append(f.categories.container);f.categories.wrapper.append(f.categories.window);l.prepend(f.categories.wrapper);
e._items_panel.init({panel:"categories",page:i("<ul />"),item:i('<li style="width: '+d.categories.width+"px; height: "+d.categories.height+'px;" />')});d.categories.auto_hide&&(f.categories.wrapper.css({display:"none"}),l.hover(function(){f.categories.wrapper.stop().fadeTo(d.categories.hide_speed,1)},function(){f.categories.wrapper.stop().fadeTo(d.categories.hide_speed,0)}));e.categories.display_categories()},display_categories:function(){var a,b,j=[],h,g=0,l=k[k.length-1],m,n;if(d.categories.display){if(c.categories.render_categories){1==
k.length?j=v:(b=i.extend([],k),b.pop(),j=e.get_category(b).children,j=[{id:-1,name:"&lt;Back",open_parent:!0}].concat(j),l++);h=j.length;e._items_panel.calculate_pages({panel:"categories",item_count:h});f.categories.container.empty();for(g=0;g<h;g++)0===g%c.categories.per_page&&("vertical"==d.categories.pagination.direction?f.categories.container.height(f.categories.container.height()+c.categories.window_height):f.categories.container.width(f.categories.container.width()+c.categories.window_width),
a=i("<ul />"),a.width(c.categories.page.width).height(c.categories.page.height).appendTo(f.categories.container)),m="undefined"!=typeof j[g].children&&0<j[g].children.length,b="<li"+(j[g].open_parent?' class="open_parent"':"")+(m?' class="has_children"':"")+' style="width: '+d.categories.width+"px; height: "+d.categories.height+'px;"><a href="#" class="'+(j[g].open_parent?"back_button":"category")+'"><span>'+j[g].name+"</span></a>",m&&(b+='<a href="#" class="open_children"></a>'),b+="</li>",a.append(b);
f.categories.pages=f.categories.container.find("> ul");b=f.categories.pages.find("> li > a.category");a=b.eq(0);n=d.categories.height-(a.outerHeight(!0)-a.height());b.height(n);b.each(function(){var a=i(this).find("span"),b=a.height();n>b?a.css({top:Math.floor((n-b)/2)}):a.css({top:0})})}else 1<k.length&&l++,c.categories.render_categories=!0;e.categories.select(l)}},trigger:function(){f.categories.container.delegate("li > a","click",function(){var a=i(this),b=a.parent(),d=b.parent().index()*c.categories.per_page+
b.index();f.categories.pages.find("> li").eq(0).hasClass("open_parent")&&d--;if(a.hasClass("category")){if(b.hasClass("on"))return!1;k.pop();k.push(d);p=e.category_ids_from_indexes(k);g=e.get_category(k);g.item_count=g.items.length;m=0;c.categories.render_categories=!1;e.change_category()}else a.hasClass("open_children")?(k.pop(),k.push(d),k.push(0),p=e.category_ids_from_indexes(k),g=e.get_category(k),g.item_count=g.items.length,m=0,e.change_category()):a.hasClass("back_button")&&(k.pop(),p=e.category_ids_from_indexes(k),
g=e.get_category(k),g.item_count=g.items.length,m=0,e.change_category());return!1})},select:function(a){a=f.categories.pages.find("> li").eq(a);e._items_panel.move_to_page("categories",a.parent().index());f.categories.pages.find("> li.on").removeClass("on");a.addClass("on")}},change_category:function(){e.main_panel.display_category();e.categories.display_categories();e.thumbnails.display_category();e.pagination.display_category();e.gallery_title.select();e.gallery_info.display();e.show_item(m,!0)},
arrows:{init:function(){C=i('<a href="#" class="navigation_button prev">Previous</a>');D=i('<a href="#" class="navigation_button next">Next</a>');l.prepend(C,D);e.position_element(C,d.arrows.prev.position);e.position_element(D,d.arrows.next.position)},trigger:function(){C.click(function(){e.prev();return!1});D.click(function(){e.next();return!1});d.arrows.auto_hide&&(C.fadeTo(0,0),D.fadeTo(0,0),l.hover(function(){C.stop().fadeTo(d.arrows.hide_speed,1);D.stop().fadeTo(d.arrows.hide_speed,1)},function(){C.stop().fadeTo(d.arrows.hide_speed,
0);D.stop().fadeTo(d.arrows.hide_speed,0)}))}},_title_box:{init:function(a){var b,f;c.title_boxes[a.box]=i('<span class="title_box'+(a.custom_class?" "+a.custom_class:"")+'" style="height: '+d.title_boxes[a.box].height+'px;"><span>T</span></span>');b=c.title_boxes[a.box].find("> span");c.title_boxes[a.box].css("visibility","hidden");l.prepend(c.title_boxes[a.box]);e.position_element(c.title_boxes[a.box],d.title_boxes[a.box].position);f=Math.floor((d.title_boxes[a.box].height-b.height())/2);0>f&&(f=
0);b.css({top:f}).empty();c.title_boxes[a.box].css("visibility","")},change_text:function(a){a.text?c.title_boxes[a.box].is(":visible")?c.title_boxes[a.box].stop().fadeTo(200,0,function(){c.title_boxes[a.box].fadeTo(400,1).find("> span").html(a.text)}):c.title_boxes[a.box].stop().fadeTo(400,1).find("> span").html(a.text):c.title_boxes[a.box].stop().fadeTo(200,0)}},item_title:{init:function(){e._title_box.init({box:"current_item",custom_class:"current_item"});e.item_title.select(m)},select:function(a){d.title_boxes.current_item.display&&
e._title_box.change_text({box:"current_item",text:g.items[a].title})},size:function(){d.title_boxes.current_item.display&&e.position_element(c.title_boxes.current_item,d.title_boxes.current_item.position)}},gallery_title:{init:function(){e._title_box.init({box:"current_gallery",custom_class:"current_gallery"});e.gallery_title.select()},select:function(){d.title_boxes.current_gallery.display&&e._title_box.change_text({box:"current_gallery",text:g.name})},size:function(){d.title_boxes.current_gallery.display&&
e.position_element(c.title_boxes.current_gallery,d.title_boxes.current_gallery.position)}},triggers:function(){d.arrows.display&&e.arrows.trigger();d.thumbs.display&&e.thumbnails.trigger();d.categories.display&&e.categories.trigger();d.key_browse&&e.key_browse();d.autoplay.enable&&e.autoplay.start();d.autoplay.pause_on_hover&&l.hover(function(){!G&&!J&&(J=!0,e.autoplay.pause())},function(){J=!1;!K&&(!G&&!M)&&e.autoplay.start()});l.bind("resize_slider",function(a,b){e.autoplay.reset();c.container_dimensions=
{width:d.container_dimensions.w_as_ratio?Math.round(b.width*d.container_dimensions.width):b.width,height:d.container_dimensions.h_as_ratio?Math.round(b.height*d.container_dimensions.height):b.height};l.css(c.container_dimensions);e.main_panel.size();e.autoplay.size();e._scrollable_boxes.size("gallery_info");e._scrollable_boxes.size("item_info");e.gallery_title.size();e.item_title.size();e.thumbnails.display_category(!1);e.categories.display_categories();d.pagination.display&&e.position_element(t,
d.pagination.position);d.autoplay_toggle.display&&e.position_element(z,d.autoplay_toggle.position);d.arrows.display&&(e.position_element(C,d.arrows.prev.position),e.position_element(D,d.arrows.next.position));e.show_item(m,!0,"")});H.fadeOut(200,function(){H.remove()});l.trigger("slider_initialized")},get_dimensions:function(a){var b;b=1<arguments.length&&"object"==typeof arguments[1]?arguments[1]:{width:c.container_dimensions.width,height:c.container_dimensions.height};return{width:a.w_as_ratio?
Math.floor(b.width*a.width):a.width,height:a.h_as_ratio?Math.floor(b.height*a.height):a.height}},position_element:function(a,b){var d=b.v_as_ratio?Math.floor(b.v_offset*c.container_dimensions.height):b.v_offset,e=b.h_as_ratio?Math.floor(b.h_offset*c.container_dimensions.width):b.h_offset;b.v_center_point&&(d-=Math.floor(a.height()/2));b.h_center_point&&(e-=Math.floor(a.width()/2));"top"==b.vertical?a.css("top",d):a.css({top:"auto",bottom:d});"left"==b.horizontal?a.css("left",e):a.css({left:"auto",
right:e})},category_indexes_from_ids:function(a,b){var c=0,d,f=[];if(0==a.length)return[];for(d=i.isArray(b)?b.length:0;c<d;c++)if(b[c].id==a[0]){a.shift();if(0!=a.length&&(f=e.category_indexes_from_ids(a,b[c].children),0==f.length))break;return[c].concat(f)}return[]},category_ids_from_indexes:function(a){var b=a.length,c=1,d,e=v[a[0]];for(d=[e.id];c<b;c++)e=e.children[a[c]],d.push(e.id);return d},get_category:function(a){var b=a.length,c=1,d;if(!i.isArray(a)||0==a.length)return v[0];for(d=v[a[0]];c<
b;c++)d=d.children[a[c]];return d},item_index_from_id:function(a){var b=g.items,c=b.length,d=0;if(void 0==a)return 0;for(;d<c;d++)if(b[d].id==a)return d;return 0},set_url_param:function(a,b){var c="",d="",e=b+(2<arguments.length?"="+arguments[2]:""),f,g=!1,i=!1,k,a=a.split("#"),c=1==a.length?!1:a[1],a=a[0].split("?");if(1==a.length||""==a[1])d=a[0]+"?"+e;else{d=a[0]+"?";f=a[1].split("&");for(k in f)"string"==typeof f[k]&&(g=f[k].split("="),g[0]==b?(i=!0,d+=e+"&"):d=1==g.length?d+(g[0]+"&"):d+(g[0]+
"="+g[1]+"&"));d=i?d.substring(0,d.length-1):d+e}return d+(!1===c?"":"#"+c)}};e.init()})};i.fn.chameleonSliderFullscreen=function(w){var d,p;close_fullscreen=function(){d.fadeTo(500,0,function(){p.trigger("destroy");d.remove()});i(document).unbind("keydown.chameleonslider_fullscreen")};d=i('<div id="chameleonSliderFullscreen_'+w.module_id+'" style="z-index: 15000; overflow: hidden; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, .5);"><div class="chameleon_slider '+
w.theme+'" /></div>');i("body").append(d);p=d.find("> .chameleon_slider");i.extend(!0,w,{container_dimensions:{width:1,height:1,w_as_ratio:!0,h_as_ratio:!0},autoplay:{pause_on_hover:!1},buttons:{exit_fullscreen:{display:!0},fullscreen:{display:!1}},main_panel:{stretch_small_image:!0}});p.bind("slider_initialized",function(){p.find("> .exit_fullscreen").click(function(){close_fullscreen();return!1});i(document).bind("keydown.chameleonslider_fullscreen",function(d){27==d.which&&close_fullscreen()})});
p.chameleonSlider_1_4(w)}})(eds1_8);